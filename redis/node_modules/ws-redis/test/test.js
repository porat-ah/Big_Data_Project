const WebSocket = require("ws");
const wsRedis = require("../src/index");

wsRedis.init(new WebSocket.Server({ port: 8080 }));
wsRedis.onConnection((ws, authenticationToken) => {
    let a = authenticationToken;
    console.log(a, process.pid);
    wsRedis.addUser(a, ws);
    wsRedis.addToGroup("broadcast", ws);
    wsRedis.sendMessageToGroup("broadcast", "message", "Ã¨ arrivato " + a);
});

wsRedis.onClientClosed((id) => {
    console.log("disconnesso client ", id);
});
console.log("aaaa");
